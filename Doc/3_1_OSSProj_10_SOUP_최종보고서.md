# A3.1 OSS 프로젝트 최종보고서

## I. 프로젝트 수행팀 개요

* 수행 학기: 1학기  
* 프로젝트명:  
    * 휠체어도 사용 가능한 동국대학교 편한 길 찾기 
* Key Words :  
    * 휠체어, 네비게이션, 접근성, 동국대학교, 다익스트라 알고리즘
* 팀명: SOUP  

구분 | 성명 | 학번 | 소속학과 | 연계전공 | 이메일  
------|-------|-------|-------|-------|-------  
팀장 | 권일준 | 2018111707 | 통계학과 | 융합SW연계전공 | jonkwon99@dongguk.edu  
팀원 | 김명하 | 2019112449 | 산업시스템공학과 | 융합SW연계전공 | kk313s@dongguk.edu  
팀원 | 이승호 | 2019111679 | 생명과학과 | 융합SW연계전공 | sholeept@dongguk.edu  

* 지도교수: 융합SW교육원      이길섭 교수님, 박효순 교수님  

## II. 프로젝트  수행 결과

### 1. 프로젝트 개요  

#### 1.1 개발 동기 및 목적  

* 동국대학교 서울캠퍼스는 남산자락에 위치하여 상당한 언덕과 건물 간의 고저차가 존재한다. 신입생 혹은 외부인, 해당 건물에 처음 가는 사람의 경우 최적화된 경로를 알기 어려워 언덕과 계단을 등반하게 되는 경우가 발생한다. 이에 동국대학교 서울캠퍼스 내에서 편한 길로 이동할 수 있는 길찾기 정보와 동국대학교의 전체 구성도를 제공하고자 한다.  
* 기존의 '동국대학교 편한 길 찾기'에서는 없었던 전동 휠체어 사용자를 위해 계단과 높은 경사도가 있는 길을 사용하지 않는 경로를 추가로 소개하고 휠체어 사용자들을 위한 최적화된 경로를 제공하는 프로그램을 개발하려고 한다.  

#### 1.2 필요성  

* 기존의 프로그램에서는 계단과 높은 경사도를 가진 경로를 모두 포함하여 휠체어 사용자들을 고려하지 않았다. 따라서 휠체어 사용자들도 프로그램을 사용 할 수 있도록 계단과 높은 경사도를 사용하지 않는 경로를 소개할 수 있는 선택지를 포함 하려 한다.  
* 동국대학교에는 여러 샛길과 지름길들이 존재하는데 학교에 오래 다니지 않는 사람들은 이 사실을 잘 몰라서 더 먼 길로 돌아가는 경우가 많다. 따라서 동국대학교의 전체 구상도를 제공하고자 한다.  

#### 1.3 개발 목표  

* 기존의 걷기와 휠체어를 사용 하는 두 가지 방법 중 선택 할 수 있도록 수정한다.  
* 사용 알고리즘을 다익스트라 알고리즘으로 변경한다.  
* 휠체어를 고려한 항목을 추가해 일정 수치 이상 경사도와 계단을 제외한 경로만을 사용한다.  
* 전동휠체어 사용자들은 전력 사용량을 사용하여 새로운 전력 소비량 계산법으로 노드 간 거리를 새로 계산한다.  
* 동국대학교의 전체 구상도를 제공한다.  

### 2. 최종결과물 소개  

<img width="550" alt="image" src="https://github.com/CSID-DGU/2024-1-OSSProj-SOUP-10/blob/main/Doc/ReferenceImages/main_page.png">  
웹사이트의 메인 페이지로 오른쪽 위 메뉴 항목을 눌러 다른 페이지로 이동을 할 수 있다.  

<img width="550" alt="image" src="https://github.com/CSID-DGU/2024-1-OSSProj-SOUP-10/blob/main/Doc/ReferenceImages/building_page.png">  
동국대학교 건물 정보를 열람할 수 있는 페이지이다. 건물 마커를 클릭시 건물의 정보와 길찾기 페이지로 이동하는 버튼이 있다.

<img width="550" alt="image" src="https://github.com/CSID-DGU/2024-1-OSSProj-SOUP-10/blob/main/Doc/ReferenceImages/conv_page.png">  
동국대학교 내 편의시설의 위치를 열람할 수 있는 페이지이다. 드롭다운 리스트에서 원하는 편의시설을 선택시 해당 편의시설이 있는 장소가 나온다. 건물 마커를 클릭시 해당 편의시설의 사진과 길찾기 페이지로 이동하는 버튼이 있다.  

<img width="550" alt="image" src="https://github.com/CSID-DGU/2024-1-OSSProj-SOUP-10/blob/main/Doc/ReferenceImages/nav_page.png">  
동국대학교 내 길찾기 페이지이다. 먼저 원하는 모드(걷기, 휠체어)를 선택한 뒤 출발지와 도착지를 선택한다. 경로 안내 버튼을 누르면 다익스트라 알고리즘을 이용하여 최적의 경로를 찾고 지도위에 막대를 그려 길을 표시한다.  

### 3. 프로젝트 추진 내용    

#### 3.1 프로젝트 진행과정    

* 동국대학교 구조도  
<img width="550" alt="image" src="https://github.com/CSID-DGU/2024-1-OSSProj-SOUP-10/blob/main/Doc/ReferenceImages/graph_finalreport.png"> 

정보문화관P | 정보문화관Q | 학생회관 | 본관 | 중앙도서관 | 신공학관 | 신공학관 <br /> 방향 출구 | 원흥관 | 남산학사 | 기숙사식당
-----------|------------|----------|-----|-----------|----------|------------------|--------|---------|----------
P | Q | S | M | L | E | R | W | D | C

> 알파벳 뒤 숫자는 층수를 의미  

* 기존의 프로그램 분석
    * 특정 지점에서 다른 지점으로 가기 위한 경로를 열량을 최소화 하는 방향으로 알고리즘을 만들었다. 노드와 노드 사이를 이동하는 데 소비되는 열량을 각 노드 간 거리로 계산하여 거리로 지정했다.  
    * 거리를 최소화하는 알고리즘으로는 A* 알고리즘을 사용했다.  
* '카카오 맵'이라는 내비게이션 앱의 경우 도보로 갈 수 있는 길과 '편안한 길' 기능을 이용해 경로를 제시하지만 계단을 포함한 경로로 안내하는 등 휠체어 이용자들이 이용하기에는 어려웠다.
* '휠비'라는 휠체어 네비게이션 앱의 경우 휠체어가 안전하게 다닐 수 있는 경로를 제시하지만 동국대학교 내의 건물이 검색되지 않았다. 또, 실제로 휠체어가 지나갈 수 없는 경로를 안내하는 경우도 있었다. 
* 전동 휠체어를 이용했을 때 사용되는 전력량은 다음 논문의 계산을 이용한다.  
    * https://www.sciencedirect.com/science/article/pii/S2352152X18308016   

* 유스케이스 다이어그램(Usecase Diagram)  
<img width="550" alt="image" src="https://github.com/CSID-DGU/2024-1-OSSProj-SOUP-10/blob/main/Doc/ReferenceImages/usecase_finalreport.jpg">  

* 블록 다이어그램(Block Diagram)
<img width="550" alt="image" src="https://github.com/CSID-DGU/2024-1-OSSProj-SOUP-10/blob/main/Doc/ReferenceImages/block_finalreport.jpg">

* 시퀀스 다이어그램(Sequence Diagram) 
<img width="550" alt="image" src="https://github.com/CSID-DGU/2024-1-OSSProj-SOUP-10/blob/main/Doc/ReferenceImages/sequence.jpg">

#### 3.2 프로젝트 구현과정    

* 선행기술과의 차별점  
    * 기존의 앱(WheelV)의 경우 동국대학교 내의 정보가 부족하다. 부족한 정보의 경우 요청으로 추가할 수 있으나 여전히 건물 내의 엘리베이터 위치의 정보는 포함하는 경우는 없었다. 또, 실제로 휠체어가 지나갈 수 없는 경로(예시: 정보문화관 Q에서 갓길로 나가는 경로)로 안내하거나 건물에서 가장 가까운 도로로 이동하는 과정에서 입구를 무시하는 경우도 있어서 새로운 프로그램의 필요성을 느낌.  
* 개발 기준을 동국대 내로 한정시킬지 아니면 주변 지역을 포함시킬지 결정  
    * 학교를 단순히 2d로 보는 것이 아닌 위치, 층수, 입구를 모두 고려해야 하기 때문에 공간데이터를 사용
    * 공간데이터 사용으로 인한 시간 부족으로 우선은 동국대 내에서도 일부 공간(정보문화관 P, Q, 학생회관, 원흥관, 신공학관, 본관, 중앙도서관)만을 우선으로 적용
    * 기존의 프로그램에서 사용한 노드에는 휠체어 이용자가 사용하지 못하는 문을 포함한 모든 문이 기술되어있어 휠체어용 길찾기에는 기존의 길찾기와는 별개의 노드를 만들어서 독립적으로 운용
    * 중간 발표 이후 신공학관에서 나가는 경로 추가의 필요성을 확인하여 신공학관에서 충무로 방향 출구를 포함하고 남산학사 및 기숙사식당도 포함하는 것으로 결정
* 기존 프로잭트 프로그램의 오류 발견
    * 기존의 프로그램에서 여러 부분들이 작동을 하지 않음
    * 기존의 프로그램은 frontend와 backend간 연결이 없었음
        * 프로그램 최신화 및 직접 연결로 오류 수정
    * web 소켓 오류 발견
        * 서버 도입으로 해결
    * 네비게이션 기능 자체의 오류로 작동하지 않음
        * 네비게이션 파트 코드를 처음부터 재작성
        * 네비게이션 프로그램 실행 결과 중간 노드값은 출력 되나 지도상에 마커와 경로가 찍히지 않는 오류 발생  
        * 좌표 데이터가 같이 오지 않는 오류를 발견
        * 좌표 데이터 호출 및 관련 코드 수정으로 해결

<br />  

* Dijkstra 알고리즘 사용: 기존에 참고한 서비스는 A*알고리즘을 사용하였는데 이는 모든 노드를 조사하기보다는 성능속도 증감에 초점을 두었기 때문이다. 반면, 휠체어 네비게이션은 최단 거리나 이동시간에 중점을 두기 보다는 계단이나 높은 경사도와 같은 경사도를 피하는 것이 중요사항이다. 따라서 탐색 과정에서 모든 노드를 조사하는 다익스트라 알고리즘을 채택하였다.  
* 전동 휠체어 전력 계산: 전동 휠체어 이용자들은 열량 계산법이 아닌 전력 소비량을 구해야 하므로 P = M * g * (f * cos(α) + sin(α)) * V * η으로 재설정하였다. 이 과정에서 사용한 휠체어는 Typhoon II으로 질량은 180kg이므로 대한민국 평균 몸무게인 65kg을 더한 총 무게는 M = 245kg, 중력가속도는 g = 9.8m/s**2, 회전저항 계수는 f = 0.13, 모터 효율은 η = 0.75, 평균 속도 4.5m/s 을 대입하면 P = 234 * (0.13 * cos(α) + sin(α))이다. 총 필요한 전력량은 P * L / V(= 4.5)이다.
    * M = mass, g = gravity, f = rolling resistent coefficient, α = slope(%), V = speed, η = efficiency of motor, L = length
* 공간 정보를 활용한 길찾기: 기존의 길찾기에서는 특정 지점에서 다른 지점으로의 경로는 계산하지만 높이는 고려하지 않는다. 동국대학교 휠체어 네비게이션은 동국대학교의 건물들의 입구가 하나가 아닌 여러 층에 있다. 따라서 건물으로의 도착만이 아닌 건물 내의 특정 공간으로의 이동을 목적으로 하기 때문에 층수와 입구 또한 고려해야한다. 따라서 기존의 네비게이션과는 달리 공간적 데이터를 이용하는 방법으로 네비게이션을 구현하였다. 다만 이 과정에서 동국대학교 전체에 대한 공간데이터를 구축하려면 많은 시간이 걸리기 때문에 일단 작은 범위를 설정하였다. 

<img width="550" alt="image" src="https://github.com/CSID-DGU/2024-1-OSSProj-SOUP-10/blob/main/Doc/ReferenceImages/schedule_finalreport.JPG">

### 4. 기대효과  

* 전력 기반 경로 최적화  
   * 시간이나 거리가 아닌 전력 소비를 최소화하여, 전동 휠체어 사용자가 가장 효율적으로 이동할 수 있는 경로 제공  
* 이동 편의성 증대  
   * 캠퍼스 내에서 휠체어 사용자의 자유로운 이동을 가능하게 하여 일상 생활의 질 향상  
* 접근성 개선  
   * 계단이나 경사로를 피하는 경로 선택으로 모든 건물 및 시설 접근 용이  
* 사회적 포용성 강화  
   * 장애를 가진 학생 및 방문객에게 평등한 교육 및 체험 기회 제공 

### 5. 팀원 역할    

구분 | 성명 | 팀내 역할 
:----:|:-----:|-------
팀장 | 권일준 | 데이터 관리 및 최신화, frontend 보조, 서류 작성
팀원 | 김명하 | backend, 다익스트라 알고리즘 작성 
팀원 | 이승호 | frontend, 발표 ppt 제작

### 6. 참고문헌  

1. 공공데이터포털, 서울시 경사도, https://data.seoul.go.kr/dataList/OA-22241/F/1/datasetView.do, 2023.12.26  
2. Dafne Zuleima Morgado Ramirez 외 7명, Adjusted method to calculate an electric wheelchair power cycle: fuel cell implementation example, Journal of Energy Storage 23 (2019) p.371-380 

### 7. 프로젝트 성과    

Github 등록: https://github.com/CSID-DGU/2024-1-OSSProj-SOUP-10 

## README.md로 돌아가기
[README](https://github.com/CSID-DGU/2024-1-OSSProj-SOUP-10/blob/main/README.md)